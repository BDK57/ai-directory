import React, { useState } from "react";
import { useTranslation } from "react-i18next";
import ArabicIcon from '../../assets/icons/ar.svg'

const LanguageSwitcher = () => {
  const { i18n } = useTranslation();
  const [isOpen, setIsOpen] = useState(false);

  const toggleDropdown = () => setIsOpen(!isOpen);

  const changeLanguage = (lang) => {
    i18n.changeLanguage(lang);
    localStorage.setItem("i18nextLng", lang);
    setIsOpen(false);
  };

  return (
    <div className="relative inline-block">
      <button
        onClick={toggleDropdown}
        className="flex items-center gap-2  text-black rounded-lg transition-all duration-300 "
      >
     <span className="font-montserrat font-medium text-white text-[16px] leading-[100%] tracking-[0%]">
  {i18n.language === "en" ? "En" : "Ar"}
</span>

        <span className="w-10 h-10">
          {i18n.language === "en" ? (
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 8.01761C13.3928 8.01761 8.01758 13.3928 8.01758 20C8.01758 26.6072 13.3932 31.9824 20 31.9824C26.6068 31.9824 31.9824 26.6072 31.9824 20C31.9824 13.3928 26.6072 8.01761 20 8.01761Z" fill="#0000D2"/>
            <path d="M31.8267 18.0829C31.4007 15.4281 30.0783 13.0113 28.1211 11.2001L23.7659 13.9261V8.62773C22.5575 8.22653 21.2895 8.01893 19.9999 8.01813C18.7099 8.01853 17.4419 8.22653 16.2335 8.62813V13.9265L11.8787 11.2001C8.96035 13.8561 7.50755 18.0097 8.17315 21.9173C8.59955 24.5721 9.92155 26.9889 11.8787 28.8001L16.2335 26.0741V31.3725C18.6399 32.1829 21.3595 32.1829 23.7659 31.3725V26.0741L28.1211 28.8001C31.0395 26.1441 32.4923 21.9905 31.8267 18.0829Z" fill="white"/>
            <path d="M13.9558 17.6828H17.6826V17.0672L10.5802 12.6076C10.065 13.2624 9.61583 13.9708 9.24463 14.7248L13.9558 17.6828Z" fill="#E90000"/>
            <path d="M22.3169 22.3168V22.9328L29.4193 27.3924C29.9345 26.7376 30.3837 26.0292 30.7549 25.2752L26.0437 22.3168H22.3169Z" fill="#E90000"/>
            <path d="M17.683 22.9328V22.3168H13.9558L9.24463 25.2752C9.61583 26.0292 10.0654 26.7376 10.5802 27.3924L17.683 22.9328Z" fill="#E90000"/>
            <path d="M22.3169 17.6828H26.0437L30.7549 14.7244C30.3837 13.9704 29.9341 13.262 29.4193 12.6072L22.3169 17.0672V17.6828Z" fill="#E90000"/>
            <path d="M25.4068 18.0832H21.9168V17.3184V8.17281C21.2924 8.07201 20.6524 8.01761 20 8.01761C19.3472 8.01761 18.7076 8.07201 18.0828 8.17281V17.318V18.0828H14.5928H8.17278C8.07198 18.7072 8.01758 19.3472 8.01758 20C8.01758 20.6528 8.07198 21.2924 8.17278 21.9168H14.5928H18.0828V22.6816V31.8268C18.7076 31.9276 19.3472 31.982 20 31.982C20.6524 31.982 21.2924 31.9276 21.9168 31.8268V22.6816V21.9168H25.4068H31.8268C31.9276 21.2924 31.982 20.6524 31.982 20C31.982 19.3476 31.9276 18.7076 31.8268 18.0828L25.4068 18.0832Z" fill="#E90000"/>
            </svg>
            
          ) : (
            <img src={ArabicIcon} alt="Arabic" className="w-full h-full" />
          )}
        </span>
        <svg width="24" height="12" viewBox="0 0 24 12" fill="white" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.4198 2.45199L18.4798 3.51299L12.7028 9.29199C12.6102 9.38514 12.5001 9.45907 12.3789 9.50952C12.2576 9.55997 12.1276 9.58594 11.9963 9.58594C11.8649 9.58594 11.7349 9.55997 11.6137 9.50952C11.4924 9.45907 11.3823 9.38514 11.2898 9.29199L5.50977 3.51299L6.56977 2.45299L11.9948 7.87699L17.4198 2.45199Z" fill="white"/>
        </svg>
      </button>

      {isOpen && (
        <div className="absolute left-0 mt-2 w-40 bg-primary-black shadow-lg rounded-lg">
          <button onClick={() => changeLanguage("en")} className="flex items-center gap-2 p-2 w-full ">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 8.01761C13.3928 8.01761 8.01758 13.3928 8.01758 20C8.01758 26.6072 13.3932 31.9824 20 31.9824C26.6068 31.9824 31.9824 26.6072 31.9824 20C31.9824 13.3928 26.6072 8.01761 20 8.01761Z" fill="#0000D2"/>
<path d="M31.8267 18.0829C31.4007 15.4281 30.0783 13.0113 28.1211 11.2001L23.7659 13.9261V8.62773C22.5575 8.22653 21.2895 8.01893 19.9999 8.01813C18.7099 8.01853 17.4419 8.22653 16.2335 8.62813V13.9265L11.8787 11.2001C8.96035 13.8561 7.50755 18.0097 8.17315 21.9173C8.59955 24.5721 9.92155 26.9889 11.8787 28.8001L16.2335 26.0741V31.3725C18.6399 32.1829 21.3595 32.1829 23.7659 31.3725V26.0741L28.1211 28.8001C31.0395 26.1441 32.4923 21.9905 31.8267 18.0829Z" fill="white"/>
<path d="M13.9558 17.6828H17.6826V17.0672L10.5802 12.6076C10.065 13.2624 9.61583 13.9708 9.24463 14.7248L13.9558 17.6828Z" fill="#E90000"/>
<path d="M22.3169 22.3168V22.9328L29.4193 27.3924C29.9345 26.7376 30.3837 26.0292 30.7549 25.2752L26.0437 22.3168H22.3169Z" fill="#E90000"/>
<path d="M17.683 22.9328V22.3168H13.9558L9.24463 25.2752C9.61583 26.0292 10.0654 26.7376 10.5802 27.3924L17.683 22.9328Z" fill="#E90000"/>
<path d="M22.3169 17.6828H26.0437L30.7549 14.7244C30.3837 13.9704 29.9341 13.262 29.4193 12.6072L22.3169 17.0672V17.6828Z" fill="#E90000"/>
<path d="M25.4068 18.0832H21.9168V17.3184V8.17281C21.2924 8.07201 20.6524 8.01761 20 8.01761C19.3472 8.01761 18.7076 8.07201 18.0828 8.17281V17.318V18.0828H14.5928H8.17278C8.07198 18.7072 8.01758 19.3472 8.01758 20C8.01758 20.6528 8.07198 21.2924 8.17278 21.9168H14.5928H18.0828V22.6816V31.8268C18.7076 31.9276 19.3472 31.982 20 31.982C20.6524 31.982 21.2924 31.9276 21.9168 31.8268V22.6816V21.9168H25.4068H31.8268C31.9276 21.2924 31.982 20.6524 31.982 20C31.982 19.3476 31.9276 18.7076 31.8268 18.0828L25.4068 18.0832Z" fill="#E90000"/>
</svg>

            English
          </button>
          <button onClick={() => changeLanguage("ar")} className="flex items-center gap-2 p-2 w-full">
            <img src={ArabicIcon} alt="Arabic" className="w-6 h-6" />
            العربية
          </button>
        </div>
      )}
    </div>
  );
};

export default LanguageSwitcher;
